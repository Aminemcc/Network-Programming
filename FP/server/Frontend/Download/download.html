<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download File</title>
    <link rel="stylesheet" type="text/css" href="../Download/download.css">
    <link rel="stylesheet" type="text/css" href="../Upload/upload.css">
    <link rel="stylesheet" type="text/css" href="../index.css">
</head>

<body>
    <input class="menu-icon" type="checkbox" id="menu-icon" name="menu-icon" />
    <label for="menu-icon"></label>
    <nav class="nav">
        <ul class="pt-5">
            <li><a href="../index.html">Home</a></li>
            <li><a href="../Upload/upload.html">Upload File</a></li>
            <li><a href="download.html">Download File</a></li>
            <li><a href="#">Get All Data</a></li>
            <li><a href="#">About This Project</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="card">
            <h3>Download Files</h3>
            <div class="formbg-inner">
                <form id="stripe-login" action="">
                    <div class="field padding-bottom--24 padding-top--24">
                        <label for="nama_file">File Name</label>
                        <input type="text" id="nama_file" name="nama_file">
                    </div>
                    <div class="field padding-bottom--20 padding-top--20">
                        <input type="submit" name="submit" value="Download">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal" id="myModal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Server Response</h3>
            <p id="responseMessage"></p>
        </div>
    </div>

    <script type="text/javascript">
        const form = document.getElementById("stripe-login");

        form.addEventListener("submit", function (event) {
            event.preventDefault(); // Prevent the default form submission

            const fileNameInput = document.getElementById("nama_file");
            const fileName = fileNameInput.value;

            const link = document.createElement("a");
            link.href = `http://localhost:8000/download/${fileName}`;
            link.download = fileName;
            link.style.display = "none";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });
    </script>
</body>

</html>
