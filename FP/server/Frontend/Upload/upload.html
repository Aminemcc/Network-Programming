<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Web</title>
    <link rel="stylesheet" type="text/css" href="upload.css">
    <link rel="stylesheet" type="text/css" href="../index.css">
    <script type="text/javascript" src="upload.js"></script>
</head>

<body>
    <input class="menu-icon" type="checkbox" id="menu-icon" name="menu-icon"/>
    <label for="menu-icon"></label>
    <nav class="nav"> 		
        <ul class="pt-5">
            <li><a href="../index.html">Home</a></li>
            <li><a href="upload.html">Upload File</a></li>
            <li><a href="../Download/download.html">Download File</a></li>
            <li><a href="#">Get All Data</a></li>
            <li><a href="#">About This Project</a></li>
        </ul>
    </nav>
    <div class="container">
        <div class="card">
          <h3>Upload Files</h3>
          <div class="drop_box">
            <header>
              <h4>Select File here</h4>
            </header>
            <input type="file" id="fileID" style="display:none;">
            <button class="btn" onclick="uploadFile()">Choose File</button>
          </div>
        </div>
    </div>

    <script type="text/javascript">
      function uploadFile() {
        console.log("Uploading")
          var fileInput = document.getElementById('fileID');
          console.log(fileInput)
          var file = fileInput.files[0];
          var filename = file.name; // Extract the filename from the file object
  
          var formData = new FormData();
          formData.append('file', file, filename); // Append the file object to the form data
          console.log(formData);
  
          var xhr = new XMLHttpRequest();
          xhr.open('POST', '/upload/' + filename, true); // Update the URL to include the filename
          xhr.onreadystatechange = function() {
              if (xhr.readyState === XMLHttpRequest.DONE) {
                  if (xhr.status === 200) {
                      // File uploaded successfully
                      console.log('File uploaded successfully.');
                  } else {
                      // Error occurred while uploading the file
                      console.error('Error occurred while uploading the file.');
                  }
              }
          };
          xhr.send(formData);
      }
  </script>
  
  
  
</body>
</html>
